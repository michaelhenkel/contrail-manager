---
apiVersion: contrail.juniper.net/v1alpha1
kind: Manager
metadata:
  name: cluster1
spec:
  commonConfiguration:
    replicas: 1
    hostNetwork: false
#    imagePullSecrets:
#    - contrail-nightly
  services:
    cassandras:
    - metadata:
        name: cassandra1
        labels:
          contrail_cluster: cluster1
      spec:
        commonConfiguration:
          activate: true
          create: false
        serviceConfiguration:
          images:
            cassandra: cassandra:3.11.4
            init: busybox
          listenAddress: auto
          startRpc: true
          port: 9160
          cqlPort: 9042
          sslStoragePort: 7001
          storagePort: 7000
          jmxLocalPort: 7199
          clusterName: ContrailConfigDB
          maxHeapSize: 1024M
          minHeapSize: 100M
    zookeepers:
    - metadata:
        name: zookeeper1
        labels:
          contrail_cluster: cluster1
      spec:
        commonConfiguration:
          activate: true
          create: false
        serviceConfiguration:
          images:
            zookeeper: docker.io/zookeeper:3.5.5
            init: busybox
          clientPort: 2181
          electionPort: 3888
          serverPort: 2888
    rabbitmq:
      metadata:
        name: rabbitmq1
        labels:
          contrail_cluster: cluster1
      spec:
        commonConfiguration:
          activate: true
          create: true
        serviceConfiguration:
          images:
            rabbitmq: rabbitmq:3.7
            init: busybox
          port: 5673
          erlangCookie: 47EFF3BB-4786-46E0-A5BB-58455B3C2CB4
